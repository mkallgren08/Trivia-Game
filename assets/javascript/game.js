// QUESTION OBJECTS AND answers
//-----------------------------------------------------

var quesOne = {
		question: "What is piezoelectricty?",
		ans1: "The first electrical effect observed in biological creatures, documented by Italian biologist Vincente Piezo.",
		ans2: "An electrical discharge that occurs when the mineral piezite is heated.",
		ans3: "An electrical charge that accumulates in certain materials in response to mechanical stress. From the Greek 'piezo' - 'to squeeze'.",
		ans4: "The amount of electricty needed to safely cook a 14-inch classic-crust pizza, or 'piezo' in Urdu.",
		answerTxt: "A material is called piezoelectric (pz) if it accumulates an electric charge when a mechanical "
		+ "stress is applied (i.e. pinching, pushing, bending, twisting, etc). The cool thing is that the opposite "
		+ "is also true - the application of an electric current will cause mechanical deformation. This is actually "
		+ "how simple electric buzzers work! A rapidly pulsing current is passed through a thin pz strip or plate "
		+ "causing the pz material to rapidly flex. These quick vibrations induce other vibrations in the surrounding "
		+ "air - which we then hear as a buzz! The pitch can be changed by altering the length of the current's pulse "
		+ "and by increasing or decreasing the current strength!",
};
var quesOneAns =  quesOne.ans3;

var quesTwo = {
		question: "What is the average flight speed velocity of an unladen swallow?",
		ans1: "A duck",
		ans2: "The Knights who now say 'Eeki ekki poing zhong z'whup!'",
		ans3: "A parrot",
		ans4: "African or European?",
		answerTxt: "No one knows for sure, but the first question to ask is if you're dealing with an African "
		+ "or European swallow. Regardless of species, one must always remember that the coconut must have a "
		+ "peeling husk so that the swallow might get a good grip."		
};
var quesTwoAns =  quesTwo.answerTxt;

var quesThree = {
		question: "Which of the following is a non-Newtonian liquid?",
		ans1: "Molten gold",
		ans2: "Ketchup",
		ans3: "Salt water",
		ans4: "Bourbon",
		answerTxt: "Ketchup is a Non-Newtonian Liquid (NNL). This means that it behaves like a liquid - except when "
		+ "force is sharply applied. Then it behaves like a solid! Another example of a common NNL is corn starch "
		+ "in water: you have probably seen this as a type of silly putty. If you run and hit your feet fast enough "
		+ "you can actually *run* on NNLs as the material under your feet briefly becomes solid!"		
};
var quesThreeAns =  quesThree.answerTxt;

var quesFour = {
		question: "Which naturally occuring (i.e. not manufactured) element has the highest melting point at " 
		+"atmospheric pressure?",
		ans1: "Tungsten",
		ans2: "Astatine",
		ans3: "Titanium",
		ans4: "Uranium",
		answerTxt: "Tungsten has the highest melting point of any naturally occuring element, melting at a "
		+ "blistering 3,422 C (6,191 F). Compare that to Iron (1,538 C/ 2,800 F), and Titanium (1,668 C/ 3,034 F)! "
		+ "Tungsten's high melting point has to do with the arrangement of electrons in its d-shell orbitals - "
		+ "they're half filled which is an exceptionally stable state to be in. More stability = harder to change."		
};
var quesFourAns =  quesFour.answertxt;

var quesFive = {
		question: "Which of these animals can hit thin bulletproof glass hard enough to shatter it?",
		ans1: "Pistol shrimp",
		ans2: "Shard-nose viper",
		ans3: "Mantis shrimp",
		ans4: "Snapping turtle",
		answerTxt: "Mantis shrimp have the quickest punch on the planet. The genus has split into two "
		+ "broad categories: 1) Spearers, with barbed and pointed arms and 2) Smashers, with club-like "
		+ "arms formed via biomineralization. Both types of shrimp hit HARD. Their 'fists' accelerate "
		+ "at 102 *thousand* meters per second-squared (228 thousand miles per second-squared). This "
		+ "means their 'fists' move at 51mph from a dead standstill..... ouch."		
};
var quesFiveAns =  quesFive.answerTxt;

var quesSix = {
		question: "What is the tallest mountain?",
		ans1: "Denali",
		ans2: "Olympus Mons",
		ans3: "Mount Everest",
		ans4: "Maunea Kea",
		answerTxt: "The cool thing here is that these are all the tallest mountains in some ways: "
		+ "Denali is the tallest mountain in North America at 20, 310', Mount Everest is the "
		+ "tallest mountain measured from sea-level on Earth at 29, 029', Mauba Kea is the tallest "
		+ "mountain on Earth if measured from its base on the Pacific floor at 33,476', but Olympus "
		+ "Mons takes the cake for being the tallest mountain we've observed in the Solar System and "
		+ "standing at a whopping 69,650'!"		
};
var quesSixAns =  quesSix.answertxt;

var quesSeven = {
		question: "What is a superconductor?",
		ans1: "A fantastic leader of a music ensemble.",
		ans2: "Any material whose electrical resistance is less than a saturated saltwater solution at 20C",
		ans3: "A material that expels magnetic fields",
		ans4: "A metal whose electrical conductivity is less than that of pure copper",
		answerTxt: "A superconductor is a material that has two incredibly useful properties: they have zero "
		+ "electrical resistance and they expel magnetic fields. The first property is invaluable for lowering "
		+ "energy consumption in electronics (amongst other things) and the second allows magnetic objects to "
		+ "levitate."

};
var quesSevenAns =  quesSeven.answerTxt;

var quesEight = {
		question: "How old was Sir Isaac Newton when  Principia Mathematica - the work that outlined the fundamentals of his new math known as calculus - was published?",
		ans1: "38",
		ans2: "41",
		ans3: "33",
		ans4: "24",
		answerTxt: "Newton was a scientific and mathematical prodigy, developing calculus to help define equations "
		+ "for physics problems that had stymied scientists for years. He outlined and published his ideas in "
		+ "'Philosophiae Naturalis Principia Mathematica' at the ripe old age of 24.",		
};
var quesEightAns =  quesEight.answerTxt;

var quesNine = {
		question: "What is the maximum recorded G-load (acceleration) that the human body has survived?",
		ans1: "~10 Gs",
		ans2: "~60 Gs",
		ans3: "~15 Gs",
		ans4: "~40 Gs",	
		answerTxt: "Col. John paul Stapp (Air Force), M.D., Ph.D was a biophysicist who studied the effects of "
		+ "acceleration and deceleration on the human body.He was heavily involved in personally field testing "
		+ "equipment that led to the creation of safe ejection seats and oxygen systems in aircraft. He was "
		+ "subjected to over 40 G's on the last test run he did on the Sonic Wind sled. Sonic Wind reached 632 miles an "
		+ "hour in 5 seconds on that run. Funnily enough, the greatest forces were applied while the sled was braking - "
		+ " going from a little over 600 miles an hour to 0 in only 1.4 seconds....",	
};
var quesNineAns =  quesNine.answerTxt;

var quesTen = {
		question: "What sports did Dr. Neil deGrasse Tyson participate while studying physics at Harvard?",
		ans1: "Crew",
		ans2: "Wrestling",
		ans3: "Dance",
		ans4: "All of the above",
		answerTxt: "Neil deGrasse Tyson wrestled in High School and continued throughout his undergrad career. "
		+ "He rowed crew his freshman year and danced in several intramural and competetive clubs.",		
};
var quesTenAns =  quesTen.answerTxt;

var IntervalID = ""


// GENERAL VARIABLES
//-------------------------------------------------------------
var questionArr = [quesOne, quesTwo, quesThree, quesFour, quesFive, 
				   quesSix, quesSeven, quesEight, quesNine, quesTen]

var answerArr = [quesOneAns, quesTwoAns, quesThreeAns, quesFourAns, quesFiveAns, 
				 quesSixAns, quesSevenAns, quesEightAns, quesNineAns, quesTenAns]

var shuffledQuestionIndexes = [0,1,2,3,4,5,6,7,8,9]
var correct = 0;
var total = questionArr.length;
var time = 20;
var readAnswer = false;
var userGuess = "";
var j
var ansKey = ["ans3", "ans4", "ans2", "ans1", "ans3", "ans2", "ans3", "ans4", "ans4", "ans4"]
var questionCount = 0;

//FUNCTIONS
//----------------------------------------------------------------------------------------
	
function run() {
	  $("#questions").show(300);
	  questionCount++;
	  $(".question-number").html(questionCount)
	  $(".total-correct").html(correct);
	  $(".total-questions").html(questionArr.length);
	  $("#question-box").html(questionArr[shuffledQuestionIndexes[j]].question)
	  $("#answer1").html(questionArr[shuffledQuestionIndexes[j]].ans1)
	  $("#answer2").html(questionArr[shuffledQuestionIndexes[j]].ans2)
	  $("#answer3").html(questionArr[shuffledQuestionIndexes[j]].ans3)
	  $("#answer4").html(questionArr[shuffledQuestionIndexes[j]].ans4)
      intervalId = setInterval(decrement, 1000);
      // $(".progress")
    }

function decrement() {
      time--;
      var width = (100 - (time*5))
      $("#timer").html(time);
      $(".progress-bar").css("width", width +"%")
      if (width > 70){
      	$(".progress-bar").css({"background-color" : "red"}) 
		$(".progress-bar").css({"color" : "black"})
      }
      console.log((100 - (time*5)) +"%;")
      console.log(time);

      if (time === 0 || userGuess !== "") {
         $("#timer").html(time);
        pause();
        $("#answers").show();
        //displayAns();
        setTimeout(displayAns, 500);
      }
    }

function pause() {

    clearInterval(intervalId);
}

function reset() {
    time = 20
    $("#timer").html(time);
    userGuess = "";
    $(".progress-bar").css({"background-color" : "#337ab7"}) 
	$(".progress-bar").css({"color" : "#fff"})
	$("#rightorwrong").html("")
    $("#answer-box").html("")
    console.log("User Guess: " + userGuess)
    $("#answers").hide(900)
    }

    // var j has to be global so the logArray function can increase it's value and NOT be overwritten
    var j = 0

function displayAns(){
		$("#questions").hide(250)
		$("#total-correct").html(correct);
		$("#total-questions").html(questionArr.length);
        var answerText = questionArr[shuffledQuestionIndexes[j]].answerTxt;
        if (ansKey[shuffledQuestionIndexes[j]] === userGuess){
        	console.log("Correct!")
        	correct++;
        	$(".total-correct").html(correct);
        	$("#rightorwrong").html("<h2>Correct!</h2>");
        } else {
        	$("#rightorwrong").html("<h2>I'm sorry, that is incorrect.</h2>")
        }
        console.log("Answer: " + answerText)
        $("#answer-box").html(answerText)
        if (j < questionArr.length){
          j++;
          console.log("j=" + j)
        }
       	setTimeout(reset, 12000);
        if (j < questionArr.length){
          setTimeout(run, 12500);
        }
	  	if (j === questionArr.length){
        	$("#answers").hide(250);
        	$("#end-screen").show(500);
        }
    }          



// shuffle function from AnnaLisa
function shuffle(array) {
		  var currentIndex = array.length, temporaryValue, randomIndex;

		  // While there remain elements to shuffle...
		  while (0 !== currentIndex) {

		    // Pick a remaining element...
		    randomIndex = Math.floor(Math.random() * currentIndex);
		    currentIndex -= 1;

		    // And swap it with the current element.
		    temporaryValue = array[currentIndex];
		    array[currentIndex] = array[randomIndex];
		    array[randomIndex] = temporaryValue;
		  }

		  return array;
		}

// };

function nextQuestion(){
	readAnswer = true;

	};
//EXECUTABLE CODE
//-------------------------------------------------------------

$(document).ready(function() {
	// $("#questions").hide();
	// $("#answers").hide();
	// for (var k = 0; k< questionArr.length; k++){
	// 	console.log("k =" + shuffledQuestionIndexes[k])
	// }
	// console.log(questionArr.length);
	// console.log(quesOne.ans1)
	// console.log(questionArr[shuffledQuestionIndexes[0]].ans1)
	// $("#total-correct").html(correct)
	// $("#total-questions").html(total)


	// $("#start-button").click(function(){
	// 	runTrivia();
	// })
	$("#questions").hide();
	$("#answers").hide();
	$("#end-screen").hide();
	$(".total-questions").html(questionArr.length);

	$(".ans-btn").click(function(){
		userGuess = $(this).attr("id")
		console.log(userGuess)
		// console.log(questionArr[shuffledQuestionIndexes[j]].userGuess)
		console.log(answerArr[shuffledQuestionIndexes[j]])
	})

	$("#start-button").click(function(){
		$("#start-button").hide()
		shuffle(shuffledQuestionIndexes);
		console.log(shuffledQuestionIndexes);
		run();
	});


});

//--------------------------------------------------------------------------------------------------
	// function setOrder(questionArrays){
	// 	for (var i  = 0; i < questionArrays.length; i++){
	// 	}
	// 	var currentPick

	// }